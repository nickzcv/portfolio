{"ast":null,"code":"import _classCallCheck from \"/home/nick/Documents/GitHub/portfolio/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/nick/Documents/GitHub/portfolio/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/nick/Documents/GitHub/portfolio/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/nick/Documents/GitHub/portfolio/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel'; // Constants for normalizing input delta\n\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40; // Slow down zoom if shift key is held for more precise zooming\n\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput = /*#__PURE__*/function (_Input) {\n  _inherits(WheelInput, _Input);\n\n  var _super = _createSuper(WheelInput);\n\n  function WheelInput(element, callback, options) {\n    var _this;\n\n    _classCallCheck(this, WheelInput);\n\n    _this = _super.call(this, element, callback, options);\n    /* eslint-disable complexity, max-statements */\n\n    _this.handleEvent = function (event) {\n      if (!_this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        // Firefox doubles the values on retina screens...\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        // This one is definitely a mouse wheel event.\n        // Normalize this value to match trackpad.\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      _this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        delta: -value,\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    };\n\n    _this.events = (_this.options.events || []).concat(WHEEL_EVENTS);\n\n    _this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n\n    return _this;\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }]);\n\n  return WheelInput;\n}(Input);\n\nexport { WheelInput as default };","map":{"version":3,"sources":["../../../src/inputs/wheel-input.ts"],"names":[],"mappings":";;;;AACA,OAAO,KAAP,MAAkC,SAAlC;AAEA,SAAQ,iBAAR,QAAgC,cAAhC;AACA,SAAQ,MAAR,EAAgB,SAAhB,EAA2B,gBAA3B,QAAkD,kBAAlD;AAEA,IAAM,OAAO,GAAG,SAAS,CAAC,OAAV,CAAkB,SAAlB,MAAiC,CAAC,CAAlD;AAEA,IAAO,YAAP,GAAuB,iBAAvB,CAAO,YAAP;AACA,IAAM,UAAU,GAAG,OAAnB,C,CAEA;;AACA,IAAM,wBAAwB,GAAG,cAAjC;AACA,IAAM,oBAAoB,GAAG,EAA7B,C,CACA;;AACA,IAAM,gBAAgB,GAAG,IAAzB;;IAEqB,U;;;;;EAGnB,oBACE,OADF,EAEE,QAFF,EAGE,OAHF,EAGuB;IAAA;;IAAA;;IAErB,0BAAM,OAAN,EAAe,QAAf,EAAyB,OAAzB;IAuBF;;IACA,MAAA,WAAA,GAAc,UAAC,KAAD,EAAsB;MAClC,IAAI,CAAC,MAAK,OAAL,CAAa,MAAlB,EAA0B;QACxB;MACD;;MAED,IAAI,KAAK,GAAG,KAAK,CAAC,MAAlB;;MACA,IAAI,MAAM,CAAC,UAAX,EAAuB;QACrB;QACA,IAAI,OAAO,IAAI,KAAK,CAAC,SAAN,KAAoB,MAAM,CAAC,UAAP,CAAkB,eAArD,EAAsE;UACpE,KAAK,IAAI,MAAM,CAAC,gBAAhB;QACD;;QACD,IAAI,KAAK,CAAC,SAAN,KAAoB,MAAM,CAAC,UAAP,CAAkB,cAA1C,EAA0D;UACxD,KAAK,IAAI,oBAAT;QACD;MACF;;MAED,IAAI,KAAK,KAAK,CAAV,IAAe,KAAK,GAAG,wBAAR,KAAqC,CAAxD,EAA2D;QACzD;QACA;QACA,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,GAAG,wBAAnB,CAAR;MACD;;MAED,IAAI,KAAK,CAAC,QAAN,IAAkB,KAAtB,EAA6B;QAC3B,KAAK,GAAG,KAAK,GAAG,gBAAhB;MACD;;MAED,MAAK,QAAL,CAAc;QACZ,IAAI,EAAE,UADM;QAEZ,MAAM,EAAE;UACN,CAAC,EAAE,KAAK,CAAC,OADH;UAEN,CAAC,EAAE,KAAK,CAAC;QAFH,CAFI;QAMZ,KAAK,EAAE,CAAC,KANI;QAOZ,QAAQ,EAAE,KAPE;QAQZ,WAAW,EAAE,OARD;QASZ,MAAM,EAAE,KAAK,CAAC;MATF,CAAd;IAWD,CArCD;;IAtBE,MAAK,MAAL,GAAc,CAAC,MAAK,OAAL,CAAa,MAAb,IAAuB,EAAxB,EAA4B,MAA5B,CAAmC,YAAnC,CAAd;;IAEA,MAAK,MAAL,CAAY,OAAZ,CAAoB,UAAA,KAAK;MAAA,OACvB,OAAO,CAAC,gBAAR,CAAyB,KAAzB,EAAgC,MAAK,WAArC,EAAkD,gBAAgB,GAAG;QAAC,OAAO,EAAE;MAAV,CAAH,GAAsB,KAAxF,CADuB;IAAA,CAAzB;;IANqB;EAStB;;;;WAED,mBAAO;MAAA;;MACL,KAAK,MAAL,CAAY,OAAZ,CAAoB,UAAA,KAAK;QAAA,OAAI,MAAI,CAAC,OAAL,CAAa,mBAAb,CAAiC,KAAjC,EAAwC,MAAI,CAAC,WAA7C,CAAJ;MAAA,CAAzB;IACD;IAED;;;AAGG;;;;WACH,yBAAgB,SAAhB,EAAmC,OAAnC,EAAmD;MACjD,IAAI,SAAS,KAAK,UAAlB,EAA8B;QAC5B,KAAK,OAAL,CAAa,MAAb,GAAsB,OAAtB;MACD;IACF;;;;EA7BqC,K;;SAAnB,U","sourceRoot":"","sourcesContent":["import Input from './input';\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nconst firefox = userAgent.indexOf('firefox') !== -1;\nconst { WHEEL_EVENTS } = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\n// Constants for normalizing input delta\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\n// Slow down zoom if shift key is held for more precise zooming\nconst SHIFT_MULTIPLIER = 0.25;\nexport default class WheelInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        /* eslint-disable complexity, max-statements */\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            let value = event.deltaY;\n            if (window.WheelEvent) {\n                // Firefox doubles the values on retina screens...\n                if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n                    value /= window.devicePixelRatio;\n                }\n                if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n                    value *= WHEEL_DELTA_PER_LINE;\n                }\n            }\n            if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n                // This one is definitely a mouse wheel event.\n                // Normalize this value to match trackpad.\n                value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n            }\n            if (event.shiftKey && value) {\n                value = value * SHIFT_MULTIPLIER;\n            }\n            this.callback({\n                type: EVENT_TYPE,\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                delta: -value,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        this.events = (this.options.events || []).concat(WHEEL_EVENTS);\n        this.events.forEach(event => element.addEventListener(event, this.handleEvent, passiveSupported ? { passive: false } : false));\n    }\n    destroy() {\n        this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === EVENT_TYPE) {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=wheel-input.js.map"]},"metadata":{},"sourceType":"module"}